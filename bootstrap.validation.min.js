/* =========================================================
* Copyright 2012 Wayne Ho. All rights reserved.
* Use of this source code is governed by a apache
* license that can be found in the LICENSE file.
* ========================================================= */
!function(e){e.fn.validation=function(n){return this.each(function(){t=e.extend({},e.fn.validation.defaults,n);s(this)})};e.fn.validation.defaults={validators:[{name:"required",validate:function(){return e.trim(e(this).val())!=""}},{name:"checked",validate:function(){return e(this).is(":checked")}},{name:"compare",validate:function(){target=e(this).attr("data-compare-target");if(target!=undefined){return e(this).val()==e("#"+target).val()}return true}},{name:"char",validate:function(){return/^[a-zA-Z]*$/.test(e(this).val())}},{name:"number",validate:function(){return/^[0-9]\d*$/.test(e(this).val())}},{name:"email",validate:function(){return/^([a-zA-Z0-9_\.-]+)@([a-zA-Z0-9\.-]+)\.([a-zA-Z\.]{2,6})$/.test(e(this).val())}},{name:"pattern",validate:function(){pattern=e(this).attr("data-regex-pattern");if(pattern!=undefined){var t=new RegExp(pattern);return t.test(e(this).val())}return true}}]};var t={};var n=true;var r=function(n,r){var s=e(n);var o=true;var u="";for(i=0;i<r.length;i++){var a=r[i];u=s.attr("data-"+a+"-message");for(j=0;j<t.validators.length;j++){var f=t.validators[j];if(a==f.name){if(!f.validate.call(s)){o=false;break}}}if(!o){break}}var l=s.parents(".controls");var c=s.parents(".control-group");var h=l.children(".help-block, .help-inline");c.removeClass("error");if(h.length>0){h.remove()}if(!o){c.addClass("error");if(u!=undefined){l.append('<span class="help-inline">'+u+"</span>")}}return o};var s=function(t){e(t).submit(function(){if(n){e("input, textarea",this).each(function(){var t=e(this);var n=t.attr("data-validators")==undefined?null:t.attr("data-validators").split(" ");if(n!=null&&n.length>0){t.bind("focus",function(){var e=t.parents(".controls");var n=t.parents(".control-group");var r=e.children(".help-block, .help-inline");n.removeClass("error");if(r.length>0){r.remove()}});t.bind("blur change",function(){r(this,n)})}});n=false}var t=true;e("input, textarea",this).each(function(){var n=e(this);var i=n.attr("data-validators")==undefined?null:n.attr("data-validators").split(" ");if(i!=null&&i.length>0){if(!r(this,i)){t=false;scrollTo(0,n[0].offsetTop-50)}}});return t})}}(window.jQuery)
